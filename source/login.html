<!DOCTYPE html>
<html lang="en">
​
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />
</head>
​
<body>
  <div>Kanuti gildi saali login leht</div>
  <div id="message">logi sisse</div>
  <div>
    <input id="email" type="email" placeholder="email">
    <input id="pswd" type="password" placeholder="salasõna">
    <button onclick="signInWithEmail()">logi sisse</button>
    <button onclick="signInWithGoogle()">Google</button>
    <button onclick="signInWithFB()">Facebook</button>
​
  </div>
​
  <script>
    var config = {
      apiKey: "AIzaSyBV8jnjv5Uafn0c0RjVS75EGS_jNdHCQLU",
      authDomain: "kgs-auth.firebaseapp.com",
    };
    firebase.initializeApp(config)
    var email = document.getElementById("email").value
    var password = document.getElementById("pswd").value
    var googleProvider = new firebase.auth.GoogleAuthProvider();
    var facebookProvider = new firebase.auth.FacebookAuthProvider();
    var twitterProvider = new firebase.auth.TwitterAuthProvider();
    var githubProvider = new firebase.auth.GithubAuthProvider();
    function signInWithEmail() {
      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          document.getElementById("message").innerHTML = "Welcome, " + user.email;
        } else {
          document.getElementById("message").innerHTML = "No user signed in.";
        }
      });
      firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {
        document.getElementById("message").innerHTML = error.message;
      });
    }
    function signInWithGoogle() {
      googleProvider.addScope('https://www.googleapis.com/auth/contacts.readonly');
      // firebase.auth().languageCode = 'fr_FR';
      // googleProvider.setCustomParameters({
      //   'login_hint': 'user@example.com'
      // });
      firebase.auth().signInWithRedirect(googleProvider)
    }
    
    function signInWithFB() {
      // firebase.auth().languageCode = 'fr_FR';
      // To apply the default browser preference instead of
      // explicitly setting it.
      firebase.auth().useDeviceLanguage();
      // provider.addScope('user_birthday');
      firebase.auth().currentUser.linkWithRedirect(facebookProvider)
      .then(/* ... */)
      .catch(/* ... */);
      firebase.auth().signInWithRedirect(facebookProvider);
      
    }
    
    
    
    // auth.currentUser.linkWithRedirect(facebookProvider)
    // .then(/* ... */)
    // .catch(/* ... */);
    
    firebase.auth().getRedirectResult().then(function (result) {
      if (result.credential) {
        // This gives you a Google Access Token. You can use it to access the Google API.
        var token = result.credential.accessToken;
        // ...
      }
      // The signed-in user info.
      var user = result.user;
      console.log("user: ", result.user)
    }).catch(function (error) {
      console.log(error)
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      // The email of the user's account used.
      var email = error.email;
      // The firebase.auth.AuthCredential type that was used.
      var credential = error.credential;
      // ...
    });
    //http://localhost:5500/index.html
    // var firebase = require('firebase');
    // var firebaseui = require('firebaseui');
    // var ui = new firebaseui.auth.AuthUI(firebase.auth());
    // ui.start('#firebaseui-auth-container', {
    //   signInOptions: [
    //   {
    //       provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
    //       signInMethod: firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD
    //     }
    //   ],
    //   // Other config options...
    // });
  </script>
</body>
​
</html>